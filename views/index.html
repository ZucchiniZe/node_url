{% extends 'layout.html' %}

{% block content %}

<h1 class="display-1">ayyy, url shortener</h1>

<div class="row">
  <div class="col-md-12">
    <p class="lead">use either the form below or curl like so</p>
    <pre>
    curl -X POST -d 'url=https://some-long.domain/plus/some/more/longness' {{ hostname }}</pre>
  </div>
</div>

<div class="row">
  <div class="col-md-6">
    <h2>Make a url</h2>
    <form method="post" action="">
      <fieldset class="form-group">
        <label for="url">url:</label>
        <input class="form-control" id="url" name="url" type="url"/>
      </fieldset>
      <fieldset class="form-group">
        <label for="short">custom url (optional):</label>
        <input class="form-control" id="short" name="short" type="text"/>
      </fieldset>
      <fieldset class="form-group">
        <label for="desc">Description</label>
        <textarea class="form-control" id="desc" name="desc" rows="5"></textarea>
      </fieldset>
      <button class="btn btn-primary" type="submit">Submit</button>
    </form>
  </div>
  {% if links %}
  <div class="col-md-6">
    <table class="table table-hover">
      <tr>
        <th>long url</th>
        <th>stats</th>
      </tr>
      {% for link in links %}
      <tr>
        <td><a href="{{ link.short_url }}">{{ link.long_url }}</a></td>
        <td><a href="/s/{{link.short_url}}">stats</a></td>
      </tr>
      {% endfor %}
    </table>
  </div>
  {% endif %}
</div>

{% endblock %}

{# The table listing #}
{#
{% for link in links %}
<div class="card card-block">
  <h4 class="card-title">{{ link.long_url }} <small class="text-muted">{{ link.hits }} hits</small></h4>
  <p class="card-text">{{ link.description }}</p>
  <a class="btn btn-primary card-link" href="{{link.short_url}}">Go to Link</a>
</div>
{% endfor %}
<div class="row">
  {% for link in links %}
  {% if loop.first %}
  <table class="table table-bordered table-hover">
    <tr class="thead-default">
      <th>long url</th>
      <th>stats</th>
    </tr>
    {% endif %}
    <tr>
      <td><a href="{{ link.short_url }}">{{ link.long_url }}</a></td>
      <td><a href="/s/{{link.short_url}}">stats</a></td>
    </tr>
    {% if loop.last %}
  </table>
  {% endif %}
  {% endfor %}
</div>
#}
